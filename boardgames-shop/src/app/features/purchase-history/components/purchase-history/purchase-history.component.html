<!-- Title-->
<h2 class="flex items-center justify-center mb-2 font-bold text-2xl text-slate-900">Purchase history</h2>

<ng-container *ngIf="purchaseItems$ | async as items">
  <!--Purchases-->
  <ng-container *ngIf="items.length > 0; else emptyPurchase">
    <div
      class="flex flex-col"
      style="min-height: calc(100vh - 130px)">
      <div class="flex-grow">
        <ng-container *ngFor="let item of items; trackBy: trackByFn">
          <!--Purchase item-->
          <app-purchase-item [order]="item"></app-purchase-item>
        </ng-container>
      </div>
      <!-- Total price -->
      <div class="flex justify-between py-4">
        <span class="text-slate-800 text-xl font-bold">Total:</span>
        <span class="text-slate-800 text-xl font-bold">${{ totalPurchasePrice$ | async }}</span>
      </div>
    </div>
  </ng-container>
  <!--Empty purchase history-->
  <ng-template #emptyPurchase>
    <div
      class="flex flex-col justify-center items-center p-4"
      style="min-height: calc(100vh - 130px)">
      <img
        src="../../../../../assets/images/empty_history.svg"
        alt="Empty cart"
        class="w-full max-w-xs mx-auto" />
      <p class="text-slate-600 font-normal text-xl mt-4">
        You don't have a purchase history. Let's buy something interesting!
      </p>
    </div>
  </ng-template>
</ng-container>
